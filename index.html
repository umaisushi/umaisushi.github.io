<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>床が減っていく2048 ― Skill Mode</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="game">
        <div id="top-left"></div>
        <div id="top-center">
            <h1>Falling Floor 2048</h1>
        </div>
        <div id="top-right">
            <button id="ranking-btn" class="ranking-btn" title="ランキング表示（R キーでも表示）">🏆</button>
            <button id="gacha-btn" class="gacha-btn" title="ガチャを回す">🎰</button>
            <button id="skill-menu-btn" class="skill-menu-btn" title="スキルメニュー">⚔️</button>
            <button id="ruleBtn" class="rule-btn" title="ルール表示">📖</button>
        </div>
        <div id="middle-left">
            <div id="info">
                <div class="info-row">スコア: <span id="score">0</span></div>
                <div class="info-row">コイン: <span id="coins">0</span></div>
                <div class="info-row">最高スコア: <span id="bestScore">0</span></div>
                <div class="info-row">最大タイル: <span id="maxTile">-</span></div>
                <div class="info-row">ターン: <span id="turn">0</span></div>
                <div class="info-row">フェーズ: <span id="phase">1</span></div>
                <div class="info-row">残り: <span id="remaining">16</span> マス</div>
            </div>
        </div>
        <div id="middle-center">
            <div id="board-container">
                <div id="board"></div>
                <div id="pause-overlay" class="pause-overlay">
                    <div class="pause-message">⏸️ 一時停止中</div>
                    <div class="pause-instruction">スペースキーまたはESCキーで再開</div>
                </div>
            </div>
        </div>
        <div id="middle-right">
            <div id="equipped-skills-display" class="equipped-skills-display"></div>
        </div>
        <div id="bottom-left"></div>
        <div id="bottom-center">
            <button id="reset-btn" class="reset-btn">🔄 Reset Game</button>
            <button id="discard-btn" class="discard-btn">🗑️ 破棄</button>
        </div>
        <div id="bottom-right"></div>
    </div>

    <!-- ルールモーダル -->
    <div id="ruleModal" class="modal">
        <div class="modal-content">
            <button id="closeRuleBtn" class="close-btn">&times;</button>
            <h2>🎮 床が減っていく2048 Skill Mode</h2>
            <div class="rule-text">
                <h3>基本ルール</h3>
                <ul>
                    <li>4×4の盤面で2048を目指す</li>
                    <li>矢印キーまたはWASDで操作</li>
                    <li>同じ数字が合体して2倍になる</li>
                </ul>
                <h3>床消失ルール</h3>
                <ul>
                    <li>一定ターンごとに最小値のタイルが消失</li>
                    <li>10ターンごとに消失した床が復活</li>
                    <li>赤い枠で次に消える床を予告</li>
                </ul>
                <h3>スキルシステム</h3>
                <ul>
                    <li>100コインでガチャを回せる</li>
                    <li>最大5つまでスキルを装備可能</li>
                    <li>Epicスキルは1つまで</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- ガチャモーダル -->
    <div id="gacha-modal" class="modal">
        <div class="modal-content">
            <button id="closeGachaBtn" class="close-btn">&times;</button>
            <h2>⚙️ スキルガチャ</h2>
            
            <div id="gacha-main">
                <p class="gacha-info">スキルを1つ選択してください</p>
                <p class="gacha-info">現在のコイン: <span id="gacha-coins">0</span> / 必要: 100コイン</p>
                <button id="gachaGetBtn" class="gacha-get-btn">🎁 ガチャを回す (100コイン)</button>
                
                <!-- ガチャ結果表示エリア -->
                <div id="gacha-result" class="gacha-result hidden">
                    <div class="gacha-card">?</div>
                    <div class="gacha-card">?</div>
                    <div class="gacha-card">?</div>
                </div>
            </div>

            <div id="skill-selection" class="skill-selection hidden">
                <p class="skill-info">取得するスキルを選択してください（1つ）</p>
                <div id="skill-options" class="skill-options"></div>
            </div>

            <div id="equipped-skills" class="equipped-skills">
                <h3>選択中のスキル</h3>
                <div id="equipped-list" class="equipped-list"></div>
                <button id="confirmSkillBtn" class="confirm-btn">スキルを取得</button>
            </div>
        </div>
    </div>

    <!-- スキルメニュー -->
    <div id="skill-menu-modal" class="modal">
        <div class="modal-content">
            <button id="closeSkillMenuBtn" class="close-btn">&times;</button>
            <h2>⚔️ スキルメニュー</h2>
            <div class="skill-menu-content">
                <div class="available-skills">
                    <h3>所持スキル</h3>
                    <div id="available-skills-list" class="available-skills-list"></div>
                </div>
                <div class="equipped-skills-menu">
                    <h3>装備中 (最大5つ)</h3>
                    <div id="equipped-skills-list" class="equipped-skills-list"></div>
                </div>
            </div>
            <button id="startActualGameBtn" class="start-actual-game-btn">ゲーム開始</button>
        </div>
    </div>

    <!-- ランキングモーダル -->
    <div id="ranking-modal" class="modal">
        <div class="modal-content">
            <button id="closeRankingBtn" class="close-btn">&times;</button>
            <h2>🏆 ランキング TOP 10</h2>
            <p style="color: #aaa; font-size: 14px; margin: 10px 0;">あなたの過去の記録</p>
            <div id="ranking-list" class="ranking-list"></div>
        </div>
    </div>
     <script src="script.js"></script>
</body>
</html>
